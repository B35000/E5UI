"use strict";(self.webpackChunkold_e5=self.webpackChunkold_e5||[]).push([[142],{23142:(e,t,a)=>{a.r(t),a.d(t,{AmrParser:()=>l});var i=a(84764),r=a(11585),s=a(10255),n=a(43465);const o={len:1,get:(e,t)=>({frameType:(0,n.f5)(e,t,1,4)})},m=s("music-metadata:parser:AMR"),d=[12,13,15,17,19,20,26,31,5,0,0,0,0,0,0,0];class l extends i.s{async parse(){var e,t;if("#!AMR"!==await this.tokenizer.readToken(new r.AnsiStringType(5)))throw new Error("Invalid AMR file: invalid MAGIC number");this.metadata.setFormat("container","AMR"),this.metadata.setFormat("codec","AMR"),this.metadata.setFormat("sampleRate",8e3),this.metadata.setFormat("bitrate",64e3),this.metadata.setFormat("numberOfChannels",1);let a=0,i=0;const s=null!==(e=null===(t=this.tokenizer.fileInfo)||void 0===t?void 0:t.size)&&void 0!==e?e:Number.MAX_SAFE_INTEGER;if(this.options.duration){for(;this.tokenizer.position<s;){const e=await this.tokenizer.readToken(o),t=d[e.frameType];if(t>0){if(a+=t+1,a>s)break;await this.tokenizer.ignore(t),++i}else m("Found no-data frame, frame-type: ".concat(e.frameType,". Skipping"))}this.metadata.setFormat("duration",.02*i)}}}}}]);